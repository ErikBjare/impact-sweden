<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Derivera funktioner | LU Skolprogrammering</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Derivera funktioner" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Programmering för lärare och elever, utvecklat på Lunds universitet." />
<meta property="og:description" content="Programmering för lärare och elever, utvecklat på Lunds universitet." />
<link rel="canonical" href="https://lunduniversity.github.io/schoolprog//schoolprog/exercises/derivative/" />
<meta property="og:url" content="https://lunduniversity.github.io/schoolprog//schoolprog/exercises/derivative/" />
<meta property="og:site_name" content="LU Skolprogrammering" />
<script type="application/ld+json">
{"description":"Programmering för lärare och elever, utvecklat på Lunds universitet.","@type":"WebPage","url":"https://lunduniversity.github.io/schoolprog//schoolprog/exercises/derivative/","headline":"Derivera funktioner","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/schoolprog/assets/main.css">
  <link type="application/atom+xml" rel="alternate" href="https://lunduniversity.github.io/schoolprog//schoolprog/feed.xml" title="LU Skolprogrammering" />
  
    <script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113639419-1', 'auto');
  ga('send', 'pageview');
}
</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" rel="author" href="/schoolprog/">LU Skolprogrammering</a>

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/schoolprog/exercises/">Uppdrag</a>
            
          
            
            
            <a class="page-link" href="/schoolprog/programming/">Hjälp</a>
            
          
            
            
            <a class="page-link" href="/schoolprog/for-teachers/">För lärare</a>
            
          
            
            
            <a class="page-link" href="/schoolprog/about/">Om sidan</a>
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<link href="https://use.fontawesome.com/releases/v5.0.7/css/all.css" rel="stylesheet">

<style>
.post-header {
  
}
</style>

<article class="post">

  <header class="post-header">
    <h1 class="post-title">Derivera funktioner</h1>
    
      <small style="text-style: italic">
        <i class="fa fa-tag"></i>
        medel, plottning, trigonometriska funktioner, exponentialfunktion, derivator
      </small>
    
  </header>

  <div class="post-content">
    <ul class="section-nav">
<li class="toc-entry toc-h3"><a href="#1-vi-undersöker-en-funktion">1. Vi undersöker en funktion</a></li>
<li class="toc-entry toc-h3"><a href="#2-plotta-funktionen">2. Plotta funktionen</a></li>
<li class="toc-entry toc-h3"><a href="#3-derivera-numeriskt">3. Derivera numeriskt</a></li>
<li class="toc-entry toc-h3"><a href="#4-testa-några-möjliga-derivator">4. Testa några möjliga derivator</a></li>
<li class="toc-entry toc-h3"><a href="#5-gör-en-mer-generell-funktion-för-numerisk-derivering">5. Gör en mer generell funktion för numerisk derivering</a></li>
<li class="toc-entry toc-h3"><a href="#6-använd-anonyma-funktioner-för-att-förenkla-ditt-program">6. Använd anonyma funktioner för att förenkla ditt program</a></li>
<li class="toc-entry toc-h3"><a href="#7-plotta-fler-funktioner-enkelt">7. Plotta fler funktioner enkelt</a></li>
</ul><p>I denna uppgift kommer du att träna mer på funktioner, och du får se hur man kan beräkna en derivata numeriskt med hjälp av Python. Du kommer även att få se hur man kan använda några finesser i Python, som anonyma funktioner och funktionsparametrar, för att enkelt plotta funktioner.</p>

<p>Koden i denna uppgift är provkörd på <a href="http://repl.it/languages/python3">http://repl.it/languages/python3</a> (Python 3).</p>

<h3 id="1-vi-undersöker-en-funktion">
<a id="1-vi-undersöker-en-funktion" class="anchor" href="#1-vi-unders%C3%B6ker-en-funktion" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Vi undersöker en funktion</h3>

<p>Vi ska undersöka följande funktion:</p>

<p><img src="g.png" width="500px"></p>

<p><strong>Uppdrag:</strong> Skapa ett Python-program med funktionen <code class="highlighter-rouge">g</code> enligt ovan, definierad som en (vanlig) Python-funktion. Lägg till en utskrift i ditt program, så att funktionens värde för x = 2, dvs <code class="highlighter-rouge">g(2)</code>, skrivs ut.</p>

<p>Resultatet som skrivs ut ska vara ungefär -0.34.</p>

<details>
<summary>
Tips
</summary>
<p>
</p>
<pre>
import math

def g(x):
  return # ...
...
print(g(2))
</pre>

</details>

<h3 id="2-plotta-funktionen">
<a id="2-plotta-funktionen" class="anchor" href="#2-plotta-funktionen" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Plotta funktionen</h3>

<p>Att skriva ut ett enda funktionsvärde, som ovan, säger oss inte speciellt mycket om hur funktionen ser ut. En graf vore mycket bättre. Vi vill istället plotta funktionen för x-värden från 0 till 10.</p>

<p>Använd samma teknik för plottningen som du prövat i uppgiften “Plotta funktioner”. Använd gärna den funktion <code class="highlighter-rouge">fplot</code> som finns där. Om du gjort en egen variant (exempelvis för att sätta etiketter på funktionerna) går det att använda den också.</p>

<p><strong>Uppdrag:</strong> Modifiera ditt program så att funktionen <code class="highlighter-rouge">g(x)</code> plottas för x-värden i intervallet 0 &lt;= x &lt;= 10. Glöm inte spara grafen i en fil, så att du kan se den.</p>

<h3 id="3-derivera-numeriskt">
<a id="3-derivera-numeriskt" class="anchor" href="#3-derivera-numeriskt" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Derivera numeriskt</h3>

<p>Vi intresserar oss nu för funktionens derivata, g’(x). Det är fullt möjligt att derivera funktionen symboliskt (med hjälp av deriveringsreglerna). Här ska vi emellertid plotta g’(x) på ett annat sätt, nämligen genom att låta datorn <strong>beräkna</strong> derivatans värde för varje x-värde.</p>

<p>För detta använder vi derivatans definition:</p>

<p><img src="fprime.png" width="500px"></p>

<p>Ofta ser man detta samband som ett gränsvärde, där man tänker sig h gå mot 0 (noll). Här ska vi istället använda sambandet som utgångspunkt för att beräkna derivatan av en funktion <code class="highlighter-rouge">f</code> för x-värdet <code class="highlighter-rouge">x</code>. Vi kommer därför att välja ett “lagom” litet h-värde. Du kommer strax att få se hur det går till.</p>

<p><strong>Uppdrag:</strong> Inför en Python-funktion <code class="highlighter-rouge">gderiv</code> i ditt program. Dess resultat är funktionen <code class="highlighter-rouge">g</code>:s derivata för värdet <code class="highlighter-rouge">x</code>. Använd derivatans definition (ovan) för beräkningen.</p>

<p>Din Python-kod kan se ut i stil med följande:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">gderiv</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="n">h</span> <span class="o">=</span> <span class="mf">0.00001</span>
  <span class="k">return</span> <span class="c1"># ... fyll i derivataberäkning här
</span></code></pre></div></div>

<p><strong>Uppdrag:</strong> Ändra ditt program så att <code class="highlighter-rouge">g</code> och <code class="highlighter-rouge">gderiv</code> plottas i samma bild.</p>

<details>
<summary>
Tips
</summary>
<p>
Du behöver två <code>fplot</code>-rader: en för <code>g</code> och ett för <code>gderiv</code>.
</p>
</details>

<p>Den första funktionen ritas i blått, den andra i orange.</p>

<p><strong>Uppdrag:</strong> Är derivatan rimlig?</p>

<details>
<summary>
Tips
</summary>
<p>
När <code>g</code> har ett lokalt minimum ska derivatan vara noll.
När <code>g</code> pekar som brantast uppåt ska derivatan ha ett lokalt maximum.
</p>
</details>

<h3 id="4-testa-några-möjliga-derivator">
<a id="4-testa-några-möjliga-derivator" class="anchor" href="#4-testa-n%C3%A5gra-m%C3%B6jliga-derivator" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. Testa några möjliga derivator</h3>

<p>Som vi redan nämnt kan man även derivera <code class="highlighter-rouge">g</code> symboliskt, det vill säga med hjälp av deriveringsreglerna.</p>

<p>De tre vännerna Bent, Alva och Kit har försökt göra detta, men det är länge sedan de gick i gymnasiet, och endast ett vagt minne av deriveringsreglerna återstår. De kommer fram till olika svar:</p>

<p><img src="sx.png" width="500px"></p>

<p><strong>Uppdrag:</strong> Använd Python för att ta reda på vilken av derivatorna <code class="highlighter-rouge">s1</code>, <code class="highlighter-rouge">s2</code> och <code class="highlighter-rouge">s3</code> som bäst stämmer överens med den beräknade (<code class="highlighter-rouge">gderiv</code>). Vem av de tre kan sina deriveringsregler bäst?</p>

<p>Du ska alltså <strong>inte</strong> använda dina egna kunskaper om deriveringsreglerna i denna uppgift.</p>

<details>
<summary>
Tips
</summary>
<p>
Du kan förslagsvis införa en funktion som följer:
</p>
<pre>
def diff1(x):
  return gderiv(x) - s1(x)
</pre>
Plotta funktionen.
Den visar hur mycket <code>gderiv</code> och <code>s1</code> skiljer sig åt. Om de är helt lika blir skillnaden 0, och då ska grafen för <code>diff1</code> ju bli en horisontell, rät linje. (I praktiken blir värdena inte exakt 0, men mycket små, när derivatan är korrekt.)

</details>

<h3 id="5-gör-en-mer-generell-funktion-för-numerisk-derivering">
<a id="5-gör-en-mer-generell-funktion-för-numerisk-derivering" class="anchor" href="#5-g%C3%B6r-en-mer-generell-funktion-f%C3%B6r-numerisk-derivering" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. Gör en mer generell funktion för numerisk derivering</h3>

<p>Titta på din funktion <code class="highlighter-rouge">gderiv</code> igen. Den är specifikt gjord för att beräkna ett derivatavärde för <code class="highlighter-rouge">g</code>: om du vill derivera en annan funktion på samma sätt behöver du göra en ny variant på <code class="highlighter-rouge">gderiv</code>. Det är opraktiskt i längden.</p>

<p>Istället ska vi nu göra en generell funktion, som kan få heta <code class="highlighter-rouge">deriv</code>. Den funktionen ska ta <em>två</em> parametrar, en funktion <code class="highlighter-rouge">f</code> att derivataberäkna, samt (som tidigare) ett <code class="highlighter-rouge">x</code>-värde. Derivatan av <code class="highlighter-rouge">f</code> beräknas som tidigare, men <code class="highlighter-rouge">f</code> är alltså nu en parameter.</p>

<p>Idén är att du nu ska kunna skriva <code class="highlighter-rouge">gderiv</code> enklare. Och nästa gång du behöver beräkna ett derivatavärde för en funktion kan du också, på motsvarande sätt, göra det rätt enkelt.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">deriv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
  <span class="n">h</span> <span class="o">=</span> <span class="mf">0.00001</span>
  <span class="k">return</span> <span class="o">...</span> <span class="c1"># derivatan av f
</span>
<span class="c1"># derivatan av g, som nu kan skrivas enklare
</span><span class="k">def</span> <span class="nf">gderiv</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">deriv</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Uppdrag:</strong> Skriv färdigt funktionen <code class="highlighter-rouge">deriv</code> enligt ovan. Skriv om <code class="highlighter-rouge">gderiv</code> så att den använder <code class="highlighter-rouge">deriv</code>, också enligt ovan. Plotta <code class="highlighter-rouge">g</code> tillsammans med sin derivata. Ser derivataberäkningen ut att fungera?</p>

<h3 id="6-använd-anonyma-funktioner-för-att-förenkla-ditt-program">
<a id="6-använd-anonyma-funktioner-för-att-förenkla-ditt-program" class="anchor" href="#6-anv%C3%A4nd-anonyma-funktioner-f%C3%B6r-att-f%C3%B6renkla-ditt-program" aria-hidden="true"><span class="octicon octicon-link"></span></a>6. Använd anonyma funktioner för att förenkla ditt program</h3>

<p>I uppgiften “Plotta funktioner” prövade du att använda anonyma funktioner (lambdas). Gå gärna tillbaka till den uppgiften om du behöver repetera hur de fungerar.</p>

<p>Med hjälp av en sådan anonym funktion kan man helt låta bli definiera <code class="highlighter-rouge">gderiv</code> enligt ovan. Det räcker med <code class="highlighter-rouge">g</code> och <code class="highlighter-rouge">deriv</code>.</p>

<p><strong>Uppdrag:</strong> Förenkla ditt program så att <code class="highlighter-rouge">g</code> och dess derivata plottas, men istället för att plotta <code class="highlighter-rouge">gderiv</code> använder du en kombination av en anonym funktion, <code class="highlighter-rouge">deriv</code> och <code class="highlighter-rouge">g</code>.</p>

<details>
<summary>
Tips
</summary>
<p>
Du behöver två <code>fplot</code>-rader, i stil med följande:
</p>
<pre>
fplot(g, 0, 10, "g")
fplot(lambda x: ..., 0, 10, "g'")
</pre>
Här ska <code>...</code> ersättas med ett lämpligt uttryck. Du ska alltså <b>inte</b> använda <code>gderiv</code>. (Notera också att vi här utgått från att din <code>fplot</code>-funktion tar funktionens ettikett som fjärde parameter; du kan ev. behöva justera dessa detaljer för att passa in egen <code>fplot</code>.)

</details>

<h3 id="7-plotta-fler-funktioner-enkelt">
<a id="7-plotta-fler-funktioner-enkelt" class="anchor" href="#7-plotta-fler-funktioner-enkelt" aria-hidden="true"><span class="octicon octicon-link"></span></a>7. Plotta fler funktioner enkelt</h3>

<p>Ovan har du använt funktioner som parametrar och anonyma funktioner. Du har även skapat en praktisk funktion som kan beräkna derivatavärdet för en godtycklig funktion <code class="highlighter-rouge">f</code> och ett godtyckligt <code class="highlighter-rouge">x</code>-värde. Med hjälp av dessa byggstenar kan du lätt plotta andra funktioner och deras derivator.</p>

<p><strong>Uppdrag:</strong> Plotta följande två funktioner tillsammans med sina derivator, i intervallet -5 &lt;= x &lt;= 5. Du ska <strong>inte</strong> införa några nya, namngivna funktioner (med <code class="highlighter-rouge">def</code>), utan göra detta med de byggstenar som just nämnts.</p>

<table>
  <thead>
    <tr>
      <th>funktion</th>
      <th>namn i Python</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>sinus</td>
      <td><code class="highlighter-rouge">math.sin</code></td>
    </tr>
    <tr>
      <td>absolutvärde</td>
      <td>
<code class="highlighter-rouge">abs</code>  eller <code class="highlighter-rouge">math.fabs</code>
</td>
    </tr>
  </tbody>
</table>

<p><strong>Uppdrag:</strong> Plotta den naturliga logaritmen (<code class="highlighter-rouge">math.log</code>) på samma sätt, i samma intervall.</p>

<p>Vad beror felmeddelandet på?</p>

<details>
<summary>
Tips
</summary>
<p>
Logaritmen log(x) är inte definierad för x=0. Vad är derivatan av log(x)? Varför kan den inte fungera för x=0?
</p>
</details>

<p><strong>Uppdrag:</strong> Justera intervallet till något mer meningsfullt, och pröva igen.</p>

<details>
<summary>
Tips
</summary>
<p>
Kom ihåg att du måste välja rätt intervall på två ställen: både för funktionen och för dess derivata.
</p>
</details>

  </div>

</article>

      </div>
    </main>

    <footer class="site-footer h-card">
  <data class="u-url" href="/schoolprog/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">LU Skolprogrammering</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <p>Programmering för lärare och elever, utvecklat på Lunds universitet.</p>
      </div>

      <div class="footer-col footer-col-2">
      </div>

      <div class="footer-col footer-col-3">
        <ul class="contact-list">
          
          <ul class="social-media-list">
  
  
  
  <li><a href="https://github.com/lunduniversity"><svg class="svg-icon"><use xlink:href="/schoolprog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">lunduniversity</span></a></li>
  
  
  
  
  
  
  
  
</ul>

        </ul>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
